!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("angular-doka",["exports","@angular/core"],n):n((t=t||self)["angular-doka"]={},t.ng.core)}(this,function(t,n){"use strict";var e=function(){return(e=Object.assign||function(t){for(var n,e=1,o=arguments.length;e<o;e++)for(var r in n=arguments[e])Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}).apply(this,arguments)};var o=window.Doka,r=o.supported,i=o.create,s=r(),a=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"],u=["oninit","onconfirm","oncancel","onclose","onload","onloaderror","ondestroy","onupdate"],p=function(){function t(t,o){var r=this;this.handleEvent=function(t){var n=r["on"+t.type.split(":")[1]],o=e({},t.detail);delete o.doka,n.emit(o)},this.src=null,this.options={},this.oninit=new n.EventEmitter,this.onconfirm=new n.EventEmitter,this.oncancel=new n.EventEmitter,this.onclose=new n.EventEmitter,this.onload=new n.EventEmitter,this.onloaderror=new n.EventEmitter,this.ondestroy=new n.EventEmitter,this.onupdate=new n.EventEmitter,this.root=t,this.zone=o}return t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){var t=this;if(s){this.zone.runOutsideAngular(function(){var n=t.root.nativeElement.firstChild,o=n.querySelector("img")||n.querySelector("canvas")||t.src;t.doka=i(n,e({src:o},t.options))});var n=this.doka.element;u.forEach(function(e){return n.addEventListener("Doka:"+e.substr(2),t.handleEvent)}),Object.keys(this.doka).filter(function(t){return-1===a.indexOf(t)}).forEach(function(n){return t[n]=t.doka[n]})}},t.prototype.ngOnChanges=function(t){if(!t.firstChange&&this.doka){var n=t.options?t.options.currentValue:this.options;t.src&&(n.src=t.src.currentValue),this.doka.setOptions(n)}},t.prototype.ngOnDestroy=function(){var t=this;if(this.doka){var n=this.doka.element;u.forEach(function(e){return n.removeEventListener("Doka:"+e.substr(2),t.handleEvent)}),this.doka.destroy(),this.doka=null}},t.decorators=[{type:n.Component,args:[{selector:"lib-doka",template:"\n    <div>\n      <ng-content></ng-content>\n    </div>\n  ",styles:["\n    :host {\n      display: block;\n    }\n  "]}]}],t.ctorParameters=function(){return[{type:n.ElementRef},{type:n.NgZone}]},t.propDecorators={src:[{type:n.Input}],options:[{type:n.Input}],oninit:[{type:n.Output}],onconfirm:[{type:n.Output}],oncancel:[{type:n.Output}],onclose:[{type:n.Output}],onload:[{type:n.Output}],onloaderror:[{type:n.Output}],ondestroy:[{type:n.Output}],onupdate:[{type:n.Output}]},t}();var c=r(),d=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"],l=["oninit","onconfirm","oncancel","onclose","onload","onloaderror","ondestroy","onupdate"],h=function(){function t(t,o){var r=this;this.handleEvent=function(t){var n=r["on"+t.type.split(":")[1]],o=e({},t.detail);delete o.doka,n.emit(o)},this.src=null,this.options={},this.oninit=new n.EventEmitter,this.onconfirm=new n.EventEmitter,this.oncancel=new n.EventEmitter,this.onclose=new n.EventEmitter,this.onload=new n.EventEmitter,this.onloaderror=new n.EventEmitter,this.ondestroy=new n.EventEmitter,this.onupdate=new n.EventEmitter,this.root=t,this.zone=o}return t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){var t=this;if(c){this.zone.runOutsideAngular(function(){var n=t.root.nativeElement,o=n.querySelector("img")||n.querySelector("canvas")||t.src;t.doka=i(e({src:o},t.options))});var n=this.doka.element;l.forEach(function(e){return n.addEventListener("Doka:"+e.substr(2),t.handleEvent)}),Object.keys(this.doka).filter(function(t){return-1===d.indexOf(t)}).forEach(function(n){return t[n]=t.doka[n]})}},t.prototype.ngOnChanges=function(t){if(!t.firstChange&&this.doka){var n=t.options?t.options.currentValue:this.options;t.src&&(n.src=t.src.currentValue),this.doka.setOptions(n)}},t.prototype.ngOnDestroy=function(){var t=this;if(this.doka){var n=this.doka.element;l.forEach(function(e){return n.removeEventListener("Doka:"+e.substr(2),t.handleEvent)}),this.doka.destroy(),this.doka=null}},t.decorators=[{type:n.Component,args:[{selector:"lib-doka-modal",template:"\n    <ng-content></ng-content>\n  ",styles:["\n    :host {\n      display: block;\n    }\n  "]}]}],t.ctorParameters=function(){return[{type:n.ElementRef},{type:n.NgZone}]},t.propDecorators={src:[{type:n.Input}],options:[{type:n.Input}],oninit:[{type:n.Output}],onconfirm:[{type:n.Output}],oncancel:[{type:n.Output}],onclose:[{type:n.Output}],onload:[{type:n.Output}],onloaderror:[{type:n.Output}],ondestroy:[{type:n.Output}],onupdate:[{type:n.Output}]},t}();var f=r(),y=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"],v=["oninit","onconfirm","oncancel","onclose","onload","onloaderror","ondestroy","onupdate"],E=function(){function t(t,o){var r=this;this.handleEvent=function(t){var n=r["on"+t.type.split(":")[1]],o=e({},t.detail);delete o.doka,n.emit(o)},this.src=null,this.options={},this.enabled=!1,this.oninit=new n.EventEmitter,this.onconfirm=new n.EventEmitter,this.oncancel=new n.EventEmitter,this.onclose=new n.EventEmitter,this.onload=new n.EventEmitter,this.onloaderror=new n.EventEmitter,this.ondestroy=new n.EventEmitter,this.onupdate=new n.EventEmitter,this.root=t,this.zone=o}return t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){f&&this.update()},t.prototype.ngOnChanges=function(t){t.firstChange||this.update(t)},t.prototype.ngOnDestroy=function(){this.hide()},t.prototype.show=function(t){var n=this;if(this.doka){var o=t.options?t.options.currentValue:this.options;return t.src&&(o.src=t.src.currentValue),void this.doka.setOptions(o)}this.zone.runOutsideAngular(function(){var t=n.root.nativeElement.querySelector("div").firstChild;n.doka=i(t,e({src:n.src},n.options,{styleLayoutMode:"preview",outputData:!0}))});var r=this.doka.element;v.forEach(function(t){return r.addEventListener("Doka:"+t.substr(2),n.handleEvent)}),Object.keys(this.doka).filter(function(t){return-1===y.indexOf(t)}).forEach(function(t){return n[t]=n.doka[t]})},t.prototype.hide=function(){var t=this;if(this.doka){var n=this.doka.element;v.forEach(function(e){return n.removeEventListener("Doka:"+e.substr(2),t.handleEvent)}),this.doka.destroy(),this.doka=null}},t.prototype.update=function(t){this.enabled?this.show(t):this.hide()},t.decorators=[{type:n.Component,args:[{selector:"lib-doka-overlay",template:"\n    <ng-content></ng-content>\n    <div>\n        <div></div>\n    </div>\n  ",styles:["\n    :host {\n      display: block;\n      position: relative;\n      overflow: hidden;\n    }\n    \n    :host /deep/ img {\n      display: block;\n      width: 100%;\n      height: auto;\n    }\n    \n    :host > div {\n      position: absolute;\n      left: 0;\n      top: 0;\n      width: 100%;\n      height: 100%;\n    }\n    "]}]}],t.ctorParameters=function(){return[{type:n.ElementRef},{type:n.NgZone}]},t.propDecorators={src:[{type:n.Input}],options:[{type:n.Input}],enabled:[{type:n.Input}],oninit:[{type:n.Output}],onconfirm:[{type:n.Output}],oncancel:[{type:n.Output}],onclose:[{type:n.Output}],onload:[{type:n.Output}],onloaderror:[{type:n.Output}],ondestroy:[{type:n.Output}],onupdate:[{type:n.Output}]},t}();var m=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{declarations:[p,h,E],imports:[],exports:[p,h,E]}]}],t}();t.AngularDokaComponent=p,t.AngularDokaModule=m,t.ɵa=h,t.ɵb=E,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular-doka.umd.min.js.map